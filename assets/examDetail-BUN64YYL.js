import{E as D}from"./el-card-DGddorba.js";import{E as L,a as A,c as J,b as P}from"./el-button-BQDYKMgB.js";import{g as R,h,d as V,i as j,j as C,o as l,a as m,b as r,w as i,u as H,f as _,F as k,k as g,l as x,e as M,t as w,c as $,v as I,_ as z}from"./index-DwRO6K9h.js";import{g as G}from"./mbti-D0SOmQB4.js";const K=R("mbtiQuestion",()=>{const p=h();return{mbtiQuestionList:p,setMbtiQuestion:u=>p.value=u}}),O={class:"common-layout"},U={class:"card-container"},W=V({__name:"examDetail",setup(p){const y=H(),u=K(),{setMbtiQuestion:Q}=u;j(async()=>{const e=await G();Q(e.data)});const v=C(()=>u.mbtiQuestionList),o=h(0),c=h([]),S=(e,t)=>{var a;o.value===((a=v.value)==null?void 0:a.length)-1&&E();const s=c.value.findIndex(n=>n.questionId===e);s!==-1?c.value[s].letter=t:c.value.push({questionId:e,letter:t}),o.value+=1},B=()=>{o.value!==0&&(o.value-=1)};function N(e){return[e.E>=e.I?"E":"I",e.S>=e.N?"S":"N",e.T>=e.F?"T":"F",e.J>=e.P?"J":"P"].join("")}const E=()=>{const e=c.value.reduce((s,a)=>{const n=a.letter;return s[n]=(s[n]||0)+1,s},{E:0,F:0,I:0,J:0,N:0,P:0,S:0,T:0}),t=N(e);y.push({path:"/mbti/testResults",query:{res:t}})};return(e,t)=>{const s=A,a=D,n=P,T=J,F=L;return l(),m("div",O,[r(F,null,{default:i(()=>[r(s,null,{default:i(()=>t[0]||(t[0]=[_("MBTI性格测试")])),_:1}),r(T,null,{default:i(()=>[(l(!0),m(k,null,g(v.value,(d,f)=>(l(),m("div",{key:d.id},[x(M("div",U,[M("h2",null,w(d.name),1),(l(!0),m(k,null,g(d.options,b=>(l(),$(a,{style:{width:"480px"},shadow:"hover",key:b.id,onClick:X=>S(d.id,b.letter)},{default:i(()=>[_(w(b.name),1)]),_:2},1032,["onClick"]))),128)),r(n,{type:"primary",onClick:B},{default:i(()=>t[1]||(t[1]=[_("上一题")])),_:1})],512),[[I,f===o.value]]),x(r(n,{type:"primary",onClick:E},{default:i(()=>t[2]||(t[2]=[_("完成测试 ")])),_:2},1536),[[I,f===o.value&&f===(v.value||[]).length-1]])]))),128))]),_:1})]),_:1})])}}}),te=z(W,[["__scopeId","data-v-549d299a"]]);export{te as default};
